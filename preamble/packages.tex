%!TEX root = ../thesis.tex


% JUST TEMPORARY

\usepackage{lipsum}


% GENERAL APPEARANCE

\usepackage[margin=3cm, bindingoffset=1cm]{geometry}

\usepackage[utf8]{inputenc}

\usepackage[ngerman, english]{babel}

\usepackage[math]{iwona}
\usepackage[T1]{fontenc}
\usepackage{inconsolata}

\usepackage{microtype, slantsc}

\usepackage[font=small, labelfont=bf, parindent=5mm]{caption, subcaption}

\usepackage[perpage]{footmisc}


% MATH

\usepackage{mathtools, upgreek}
\usepackage[sans]{dsfont}


% GRAPHICS

\usepackage{tikz}

\usetikzlibrary{external}
\tikzexternalize[prefix=tikzout/, only named, export=true]

\usetikzlibrary{decorations.markings}

\pgfdeclaredecoration{waves}{start}{
    \state{start}[width=0pt, next state=wave, persistent precomputation={
        \pgfmathsetlengthmacro\pgfdecorationsegmentlength{
             \pgfdecoratedpathlength / int(2
                * \pgfdecoratedpathlength
                / \pgfdecorationsegmentlength
                )
            }
        }] \relax
    \state{wave}[width=\pgfdecorationsegmentlength, persistent precomputation={
        \pgfmathsetlengthmacro\pgfdecorationsegmentamplitude{
            -\pgfdecorationsegmentamplitude
            }
        }]{
        \pgfpathsine{\pgfpoint
            {\pgfdecorationsegmentlength/2}
            {\pgfdecorationsegmentamplitude/2}
            }
        \pgfpathcosine{\pgfpoint
            {\pgfdecorationsegmentlength/2}
            {\pgfdecorationsegmentamplitude/-2}
            }
        }
    \state{final}{\pgfmoveto\pgfpointdecoratedpathlast}
    }

\def\xshift{0.525pt + 0.9625\pgflinewidth}

\tikzset{forward/.style={
    thick,
    decoration={
        markings,
        mark=at position 1/2 with {\arrow[xshift=\xshift]>},
        },
    preaction={decorate},
    }}

\tikzset{backward/.style={
    thick,
    decoration={
        markings,
        mark=at position 1/2 with {\arrow[xshift=\xshift]<},
        },
    preaction={decorate},
    }}

\tikzset{inward/.style={
    thick,
    decoration={
        markings,
        mark=at position 1/3 with {\arrow[xshift=\xshift]>},
        mark=at position 2/3 with {\arrow[xshift=\xshift]<},
        },
    preaction={decorate},
    }}

\tikzset{outward/.style={
    thick,
    decoration={
        markings,
        mark=at position 1/3 with {\arrow[xshift=\xshift]<},
        mark=at position 2/3 with {\arrow[xshift=\xshift]>},
        },
    preaction={decorate},
    }}

\tikzset{electron/.style={forward}}

\tikzset{phonon/.style={
    thick,
    decoration={waves, amplitude=2mm/3, segment length=2mm},
    decorate,
    }}


% HEADERS AND FOOTERS

\usepackage{fancyhdr}

\pagestyle{fancy}

\fancyhf{}

\def\chaptermark#1{\markboth
    {\thechapter\quad\MakeUppercase{#1}}
    {\MakeUppercase{#1}\quad\thechapter}}

\def\sectionmark#1{\markright{
    \MakeUppercase{#1}\quad\thesection}}

\fancyhead[OL]\leftmark
\fancyhead[ER]\rightmark
\fancyhead[OR]\thepage
\fancyhead[EL]\thepage

\def\headrulewidth{0.1mm}
\def\footrulewidth{0pt}


% BIBLIOGRAPHY

\usepackage[backend=bibtex8, firstinits=true, sorting=none]{biblatex}

\bibliography{references/references}

\let\mkbibnamelast\textsc
\def\labelnamepunct{\addcolon\space}

\DeclareFieldFormat[article]{volume}{\mkbibbold{#1}}

\DeclareCiteCommand\barecite{}{\usebibmacro{citeindex}\usebibmacro{cite}}{}{}

\DeclareCiteCommand\supercite[\mkbibsuperscript]
    \bibopenbracket
        {\usebibmacro{citeindex}\usebibmacro{cite}}
        \supercitedelim
    \bibclosebracket

\DeclareBibliographyDriver{incollection}{%
    \usebibmacro{bibindex}%
    \usebibmacro{begentry}%
    \usebibmacro{author/translator+others}%
    \setunit\labelnamepunct\newblock
    \usebibmacro{title}%
    \newunit\newblock
    \usebibmacro{in:}%
    Ref.~\barecite{\thefield{booktitle}}%
    \setunit\bibpagespunct
    \usebibmacro{chapter+pages}%
    \setunit\bibpagerefpunct\newblock
    \usebibmacro{pageref}%
    \usebibmacro{finentry}%
    }

% HYPERLINKS

\usepackage[hidelinks]{hyperref}

\pdfstringdefDisableCommands{\let\name\relax}
